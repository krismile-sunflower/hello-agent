`src/main.ts` 文件主要实现了一个基于 Azure OpenAI 的聊天应用。以下是其具体功能和结构概述：

1. **环境变量配置**：使用 `dotenv` 模块加载环境变量，如 API 密钥、端点、部署信息等，确保在与 Azure OpenAI 服务交互时提供必要的认证信息。

2. **文件读写功能**：
   - `readFile` 函数用于读取指定路径的文件内容。
   - `writeFile` 函数用于将内容写入指定文件，异步执行并处理可能的错误。

3. **聊天循环**：
   - 实现了一个 `chatLoop` 函数，建立一个输入输出接口，使用户可以与 AI 进行对话。
   - 将用户的输入和 AI 的响应保存在消息数组中。

4. **与 OpenAI API 交互**：
   - 通过 `openai.chat.completions.create` 方法调用 Azure OpenAI 的聊天接口，获得 AI 的响应。
   - 处理 AI 的流式响应，逐步输出内容到控制台。

5. **工具功能调用**：
   - 实现了对文件读写工具的自动调用，当用户询问时，AI 可以调用 `read_file` 或 `write_file` 函数，进行文件操作。

6. **用户交互**：
   - 提供一个命令行界面，用户可以输入消息，AI 会进行响应，同时支持文件读取和写入操作。

总体来说，`src/main.ts` 文件实现了一个功能完整的、支持与文件交互的聊天机器人程序。